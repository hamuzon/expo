<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Expo Countdown</title>
<link rel="icon" href="icon.svg" type="image/svg+xml" />
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron&family=Roboto&display=swap');
  *{margin:0;padding:0;box-sizing:border-box;}
  body{background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);font-family:'Roboto',sans-serif;color:#e0f7fa;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:1rem;}
  .container{background:rgba(255,255,255,0.07);border-radius:24px;padding:3rem 4rem;max-width:420px;width:100%;box-shadow:0 0 20px rgba(0,229,255,0.5);text-align:center;position:relative;}
  h1{font-family:'Orbitron',sans-serif;font-size:2.8rem;color:#00e5ff;text-shadow:0 0 8px #00e5ff,0 0 20px #00e5ff;margin-bottom:0.3rem;}
  h2{font-family:'Orbitron',sans-serif;font-size:1.1rem;color:#80deea;letter-spacing:0.15em;margin-bottom:1.5rem;}
  #dayDisplay{font-size:2.5rem;font-weight:700;color:#00fff7;text-shadow:0 0 5px #00fff7,0 0 15px #00fff7;margin-bottom:1rem;}
  #hourDisplay,#remainDisplay{font-size:1.2rem;font-weight:500;color:#80deea;margin-bottom:1rem;letter-spacing:0.05em;}
  .footer{font-size:0.9rem;color:#4dd0e1;letter-spacing:0.1em;user-select:none;margin-top:1rem;}
  .lang-toggle,.year-btn,.display-toggle{background:rgba(0,229,255,0.15);border:none;border-radius:20px;color:#00e5ff;font-weight:600;padding:6px 14px;margin:0 4px;cursor:pointer;transition:0.3s;}
  .lang-toggle:hover,.year-btn:hover,.display-toggle:hover{background:rgba(0,229,255,0.3);}
  .button-row{margin-bottom:1rem;}
  @media(max-width:480px){.container{padding:2rem 2rem;max-width:320px;}h1{font-size:2rem;}#dayDisplay{font-size:2rem;}#hourDisplay,#remainDisplay{font-size:1rem;}h2{font-size:1rem;}}
</style>
</head>
<body>
<div class="container">
  <div class="button-row">
    <button class="year-btn" onclick="switchYear('2025')">2025</button>
    <button class="year-btn" onclick="switchYear('2027')">2027</button>
    <button class="year-btn" onclick="switchYear('2030')">2030</button>
    <button class="lang-toggle" onclick="toggleLanguage()">EN</button>
    <button class="display-toggle" onclick="toggleDisplay()">日目⇔年月日</button>
  </div>
  <h1 id="title">読み込み中…</h1>
  <h2 id="subtitle"></h2>
  <p id="dayDisplay">読み込み中…</p>
  <p id="hourDisplay"></p>
  <p id="remainDisplay"></p>
  <div class="footer" id="footer"></div>
</div>

<script>
let year='2025';
let lang='jp';
let showDay=true;

const expoDates={
  "2025": {start:"2025-04-13T00:00:00+09:00", end:"2025-10-13T00:00:00+09:00"},
  "2027": {start:"2027-04-01T00:00:00+09:00", end:"2027-07-01T00:00:00+09:00"},
  "2030": {start:"2030-04-01T00:00:00+03:00", end:"2030-10-01T00:00:00+03:00"}
};
const expoTitles={
  "2025": {jp:"2025 日本万博", en:"Expo 2025 Japan"},
  "2027": {jp:"2027 横浜万博", en:"Expo 2027 Yokohama"},
  "2030": {jp:"2030 リヤド万博", en:"Expo 2030 Riyadh"}
};

const texts={
  jp:{
    subtitle:"開催からの経過日数カウント",
    loading:"読み込み中…",
    notStarted:"万博はまだ始まっていません。",
    ended:"万博は終了しました。",
    dayCount: d => `今日は万博の${d}日目です。`,
    elapsed: (d,h,m,s)=>`経過: ${d}日 ${h}時間 ${m}分 ${s}秒`,
    remainToStart:(d,h,m,s)=>`開催まで: ${d}日 ${h}時間 ${m}分 ${s}秒`,
    remainToEnd:(d,h,m,s)=>`終了まで: ${d}日 ${h}時間 ${m}分 ${s}秒`,
    footer:(start,end)=>`開催期間: ${start} ～ ${end}`,
    displayDay:"日目表示", displayDate:"年月日換算"
  },
  en:{
    subtitle:"Days Since Opening",
    loading:"Loading...",
    notStarted:"The Expo hasn't started yet.",
    ended:"The Expo has ended.",
    dayCount: d => `Today is day ${d} of the Expo.`,
    elapsed: (d,h,m,s)=>`Elapsed: ${d}d ${h}h ${m}m ${s}s`,
    remainToStart:(d,h,m,s)=>`Until start: ${d}d ${h}h ${m}m ${s}s`,
    remainToEnd:(d,h,m,s)=>`Until end: ${d}d ${h}h ${m}m ${s}s`,
    footer:(start,end)=>`Period: ${start} ～ ${end}`,
    displayDay:"Day Count", displayDate:"Years/Months/Days"
  }
};

const titleEl=document.getElementById("title");
const subtitleEl=document.getElementById("subtitle");
const dayDisplay=document.getElementById("dayDisplay");
const hourDisplay=document.getElementById("hourDisplay");
const remainDisplay=document.getElementById("remainDisplay");
const footerEl=document.getElementById("footer");
const langBtn=document.querySelector(".lang-toggle");
const displayBtn=document.querySelector(".display-toggle");

function formatRemaining(ms){
  let d=Math.floor(ms/(1000*60*60*24));
  let h=Math.floor((ms%(1000*60*60*24))/(1000*60*60));
  let m=Math.floor((ms%(1000*60*60))/(1000*60));
  let s=Math.floor((ms%(1000*60))/1000);
  return {d,h,m,s};
}

function convertToYMD(ms){
  let days=Math.floor(ms/(1000*60*60*24));
  let years=Math.floor(days/365);
  let months=Math.floor((days%365)/30);
  let remDays=(days%365)%30;
  return {years,months,days:remDays};
}

function updateDay(){
  const now=new Date();
  const start=new Date(expoDates[year].start);
  const end=new Date(expoDates[year].end);
  const diffStart=now-start;
  const diffEnd=now-end;
  const t=texts[lang];

  if(now<start){
    // 開始前
    const r=formatRemaining(start-now);
    dayDisplay.textContent=t.notStarted;
    hourDisplay.textContent="";
    remainDisplay.textContent=showDay?t.remainToStart(r.d,r.h,r.m,r.s):
      (()=>{const y=convertToYMD(start-now); return `${y.years}年${y.months}ヶ月${y.days}日`;})();
  }else if(now>end){
    // 終了後
    const r=formatRemaining(now-end);
    dayDisplay.textContent=t.ended;
    hourDisplay.textContent="";
    remainDisplay.textContent=showDay?t.remainToEnd(r.d,r.h,r.m,r.s):
      (()=>{const y=convertToYMD(now-end); return `${y.years}年${y.months}ヶ月${y.days}日経過`;})();
  }else{
    // 開催中
    const diffDays=Math.floor((now-start)/(1000*60*60*24))+1;
    dayDisplay.textContent=showDay?t.dayCount(diffDays):
      (()=>{const y=convertToYMD(now-start); return `${y.years}年${y.months}ヶ月${y.days}日経過`;})();
    const r=formatRemaining(now-start);
    hourDisplay.textContent=t.elapsed(r.d,r.h,r.m,r.s);
    const rem=formatRemaining(end-now);
    remainDisplay.textContent=showDay?t.remainToEnd(rem.d,rem.h,rem.m,rem.s):
      (()=>{const y=convertToYMD(end-now); return `${y.years}年${y.months}ヶ月${y.days}日`;})();
  }
  updateTexts();
}

function updateTexts(){
  titleEl.textContent=expoTitles[year][lang];
  subtitleEl.textContent=texts[lang].subtitle;
  footerEl.textContent=texts[lang].footer(expoDates[year].start.split("T")[0], expoDates[year].end.split("T")[0]);
  langBtn.textContent=(lang==='jp')?'EN':'JP';
  displayBtn.textContent=showDay?texts[lang].displayDay:texts[lang].displayDate;
}

function toggleLanguage(){lang=(lang==='jp')?'en':'jp';updateDay();}
function switchYear(y){year=y;updateDay();}
function toggleDisplay(){showDay=!showDay;updateDay();}

langBtn.addEventListener('click',toggleLanguage);
displayBtn.addEventListener('click',toggleDisplay);

updateDay();
setInterval(updateDay,1000);
</script>
</body>
</html>
